<!DOCTYPE html>
<html>
<head>
    <title>Graph Visualization with vis.js</title>
    <style type="text/css">
        #graph-container {
            width: 800px;
            height: 600px;
            border: 1px solid lightgray;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis-network.min.js"></script>
	<script src="script.js"></script>
</head>
<body>
    <div id="graph-container"></div>
	<button id="dfs-button">Run DFS</button>
	<button id="bfs-button">Run BFS</button>
	<button id="euler-button">Run EULER</button>

    <script type="text/javascript">
        const adjVertices = {
    		A: { B: 1, C: 4 },
    		B: { A: 1, C: 2, D: 5 },
    		C: { A: 4, B: 2, D: 1 },
    		D: { B: 5, C: 1 },
		};

        
        const nodes = new vis.DataSet();
        const edges = new vis.DataSet();

        const container = document.getElementById('graph-container');
        const data = {
            nodes: nodes,
            edges: edges
        };

        const options = {};

        const network = new vis.Network(container, data, options);

        function populateGraph(adjVertices) {
			const addedEdges = new Set(); // To track added edges

    		for (const node in adjVertices) {
        		nodes.add({ id: node, label: node });

        		for (const neighbor in adjVertices[node]) {
					const edgeId = `${node}-${neighbor}`;
					const reverseEdgeId = `${neighbor}-${node}`;
            		const weight = adjVertices[node][neighbor];

            		// Check if the edge is already added
           			if (!addedEdges.has(edgeId) && !addedEdges.has(reverseEdgeId)) {
                		edges.add({ id: edgeId, from: node, to: neighbor, label: String(weight) });
						addedEdges.add(edgeId)
            		}
        		}
    		}
		}

        populateGraph(adjVertices); // Populate the graph with your desired data
		
		const dfsButton = document.getElementById('dfs-button');
        dfsButton.addEventListener('click', () => {
            const startNode = prompt('Enter the starting node for DFS:');
            if (startNode) {
                runDFS(startNode);
            }
        });
		const bfsButton = document.getElementById('bfs-button');
        bfsButton.addEventListener('click', () => {
            const startNode = prompt('Enter the starting node for BFS:');
            if (startNode) {
                runBFS(startNode);
            }
        });
		const eulerButton = document.getElementById('euler-button');
        bfsButton.addEventListener('click', () => {
            const startNode = prompt('Enter the starting node for EULER:');
            if (startNode) {
                runBFS(startNode);
            }
        });

        function runDFS(startNode) {
			const visited = new Set();
			const stack = [startNode]; // Kullanacağımız yığıt veri yapısı

			function dfsStep() {
				if (stack.length === 0) {
					return; // İşlem tamamlandı
				}

				const node = stack.pop();
				visited.add(node);
				network.body.data.nodes.update([{ id: node, color: 'yellow' }]);

				setTimeout(() => {
					for (const neighbor of adjVertices[node]) {
						if (!visited.has(neighbor)) {
							stack.push(neighbor);
						}
					}
					dfsStep(); // Bir sonraki adımı tetikle
				}, 1000); // 1 saniye beklemeyi ayarla
			}

			dfsStep(); // DFS'nin ilk adımını başlat
		}
		
		function runBFS(startNode) {
			const queue = [];
			const visited = new Set();

			queue.push(startNode);
			visited.add(startNode);

			function processQueue() {
				if (queue.length === 0) {
					return;
				}

				const current = queue.shift();
				network.body.data.nodes.update([{ id: current, color: 'yellow' }]);

				for (const neighbor of adjVertices[current]) {
					if (!visited.has(neighbor)) {
						visited.add(neighbor);
						queue.push(neighbor);
					}
				}

				setTimeout(processQueue, 1000); // 1 saniye beklet
			}

			processQueue();
		}

		const adjVertices2 = {
    		A: { B: 1, C: 4 },
    		B: { A: 1, C: 2, D: 5 },
    		C: { A: 4, B: 2, D: 1 },
    		D: { B: 5, C: 1 },
		};

		const graph = new Graph(adjVertices2);
		graph.Dijkstra("A", "D");

    </script>
</body>
</html>
